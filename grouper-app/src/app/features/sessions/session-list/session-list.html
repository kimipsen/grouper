<div class="session-list-container">
  <div class="header">
    <h1>{{ 'sessionList.title' | t }}</h1>
    <div class="actions">
      <button mat-raised-button color="primary" (click)="createNewSession()">
        <mat-icon>add</mat-icon>
        {{ 'sessionList.newSession' | t }}
      </button>
      <button mat-raised-button (click)="importSession()">
        <mat-icon>upload</mat-icon>
        {{ 'common.import' | t }}
      </button>
    </div>
  </div>

  @if (sessions().length === 0) {
    <div class="empty-state">
      <mat-icon>folder_open</mat-icon>
      <h2>{{ 'sessionList.emptyTitle' | t }}</h2>
      <p>{{ 'sessionList.emptyDescription' | t }}</p>
      <button mat-raised-button color="primary" (click)="createNewSession()">
        {{ 'sessionList.createFirstSession' | t }}
      </button>
    </div>
  } @else {
    <div class="sessions-grid">
      @for (session of sessions(); track session.id) {
        <mat-card class="session-card" (click)="openSession(session)">
          <mat-card-header>
            <mat-card-title>{{ session.name }}</mat-card-title>
            @if (session.description) {
              <mat-card-subtitle>
                {{ session.description }}
              </mat-card-subtitle>
            }
          </mat-card-header>
          <mat-card-content>
            <div class="session-info">
              <div class="info-item">
                <mat-icon>people</mat-icon>
                <span>{{ 'sessionList.peopleCount' | t:{ count: session.people.length } }}</span>
              </div>
              <div class="info-item">
                <mat-icon>groups</mat-icon>
                <span>{{ 'sessionList.groupingsCount' | t:{ count: session.groupingHistory.length } }}</span>
              </div>
              <div class="info-item">
                <mat-icon>schedule</mat-icon>
                <span>{{ session.updatedAt | date:'short':undefined:currentDateLocale }}</span>
              </div>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              <mat-icon>open_in_new</mat-icon>
              {{ 'common.open' | t }}
            </button>
            <button mat-button (click)="exportSession(session, $event)">
              <mat-icon>download</mat-icon>
              {{ 'common.export' | t }}
            </button>
            <button mat-button color="warn" (click)="deleteSession(session, $event)">
              <mat-icon>delete</mat-icon>
              {{ 'common.delete' | t }}
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }
</div>
