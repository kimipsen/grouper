# yaml-language-server: $schema=https://taskfile.dev/schema.json

version: '3'

includes:
  local:
    taskfile: ./Taskfile.yml
    optional: true

vars:
  GREETING: Hello, world!

tasks:
  default:
    desc: Print a greeting message
    cmds:
      - echo "{{.GREETING}}"
    silent: true
  run:
    desc: Run `Grouper` application
    dir: grouper-app
    cmds:
      - npm run start
  test:
    desc: Run all tests
    dir: grouper-app
    cmds:
      - npm test -- --watch=false --coverage
  lint:
    desc: Run all linting
    dir: grouper-app
    cmds:
      - npm exec eslint -- --print-config src/app/app.ts | grep -q '"sonarjs/no-duplicate-string"' || (echo "SonarJS rules are not loaded in ESLint config" && exit 1)
      - npm run lint
